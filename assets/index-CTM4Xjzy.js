var de=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Fe=de((Ae,T)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function o(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=o(i);fetch(i.href,r)}})();const fe="modulepreload",pe=function(e){return"/"+e},U={},y=function(t,o,s){let i=Promise.resolve();if(o&&o.length>0){let n=function(l){return Promise.all(l.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=n(o.map(l=>{if(l=pe(l),l in U)return;U[l]=!0;const f=l.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":fe,f||(d.as="script"),d.crossOrigin="",d.href=l,c&&d.setAttribute("nonce",c),document.head.appendChild(d),f)return new Promise((w,g)=>{d.addEventListener("load",w),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(n){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=n,window.dispatchEvent(a),!a.defaultPrevented)throw n}return i.then(n=>{for(const a of n||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})};var me=Object.defineProperty,u=(e,t)=>me(e,"name",{value:t,configurable:!0}),H=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,o)=>(typeof require<"u"?require:t)[o]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});function M(e){return!isNaN(parseFloat(e))&&isFinite(e)}u(M,"_isNumber");function v(e){return e.charAt(0).toUpperCase()+e.substring(1)}u(v,"_capitalize");function k(e){return function(){return this[e]}}u(k,"_getter");var S=["isConstructor","isEval","isNative","isToplevel"],O=["columnNumber","lineNumber"],P=["fileName","functionName","source"],ye=["args"],he=["evalOrigin"],L=S.concat(O,P,ye,he);function m(e){if(e)for(var t=0;t<L.length;t++)e[L[t]]!==void 0&&this["set"+v(L[t])](e[L[t]])}u(m,"StackFrame");m.prototype={getArgs:function(){return this.args},setArgs:function(e){if(Object.prototype.toString.call(e)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof m)this.evalOrigin=e;else if(e instanceof Object)this.evalOrigin=new m(e);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",o=this.getColumnNumber()||"",s=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+o+")":"[eval]:"+t+":"+o:s?s+" ("+e+":"+t+":"+o+")":e+":"+t+":"+o}};m.fromString=u(function(e){var t=e.indexOf("("),o=e.lastIndexOf(")"),s=e.substring(0,t),i=e.substring(t+1,o).split(","),r=e.substring(o+1);if(r.indexOf("@")===0)var n=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(r,""),a=n[1],c=n[2],l=n[3];return new m({functionName:s,args:i||void 0,fileName:a,lineNumber:c||void 0,columnNumber:l||void 0})},"StackFrame$$fromString");for(_=0;_<S.length;_++)m.prototype["get"+v(S[_])]=k(S[_]),m.prototype["set"+v(S[_])]=function(e){return function(t){this[e]=!!t}}(S[_]);var _;for(E=0;E<O.length;E++)m.prototype["get"+v(O[E])]=k(O[E]),m.prototype["set"+v(O[E])]=function(e){return function(t){if(!M(t))throw new TypeError(e+" must be a Number");this[e]=Number(t)}}(O[E]);var E;for(b=0;b<P.length;b++)m.prototype["get"+v(P[b])]=k(P[b]),m.prototype["set"+v(P[b])]=function(e){return function(t){this[e]=String(t)}}(P[b]);var b,A=m;function V(){var e=/^\s*at .*(\S+:\d+|\(native\))/m,t=/^(eval@)?(\[native code])?$/;return{parse:u(function(o){if(o.stack&&o.stack.match(e))return this.parseV8OrIE(o);if(o.stack)return this.parseFFOrSafari(o);throw new Error("Cannot parse given Error object")},"ErrorStackParser$$parse"),extractLocation:u(function(o){if(o.indexOf(":")===-1)return[o];var s=/(.+?)(?::(\d+))?(?::(\d+))?$/,i=s.exec(o.replace(/[()]/g,""));return[i[1],i[2]||void 0,i[3]||void 0]},"ErrorStackParser$$extractLocation"),parseV8OrIE:u(function(o){var s=o.stack.split(`
`).filter(function(i){return!!i.match(e)},this);return s.map(function(i){i.indexOf("(eval ")>-1&&(i=i.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var r=i.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),n=r.match(/ (\(.+\)$)/);r=n?r.replace(n[0],""):r;var a=this.extractLocation(n?n[1]:r),c=n&&r||void 0,l=["eval","<anonymous>"].indexOf(a[0])>-1?void 0:a[0];return new A({functionName:c,fileName:l,lineNumber:a[1],columnNumber:a[2],source:i})},this)},"ErrorStackParser$$parseV8OrIE"),parseFFOrSafari:u(function(o){var s=o.stack.split(`
`).filter(function(i){return!i.match(t)},this);return s.map(function(i){if(i.indexOf(" > eval")>-1&&(i=i.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),i.indexOf("@")===-1&&i.indexOf(":")===-1)return new A({functionName:i});var r=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=i.match(r),a=n&&n[1]?n[1]:void 0,c=this.extractLocation(i.replace(r,""));return new A({functionName:a,fileName:c[0],lineNumber:c[1],columnNumber:c[2],source:i})},this)},"ErrorStackParser$$parseFFOrSafari")}}u(V,"ErrorStackParser");var we=new V,ge=we,h=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&!process.browser,q=h&&typeof T<"u"&&typeof T.exports<"u"&&typeof H<"u"&&typeof __dirname<"u",ve=h&&!q,_e=typeof Deno<"u",z=!h&&!_e,Ee=z&&typeof window=="object"&&typeof document=="object"&&typeof document.createElement=="function"&&"sessionStorage"in window&&typeof importScripts!="function",be=z&&typeof importScripts=="function"&&typeof self=="object";typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")>-1;var W,I,B,C,N;async function $(){if(!h||(W=(await y(async()=>{const{default:r}=await import("./__vite-browser-external-BIHI7g3E.js");return{default:r}},[])).default,C=await y(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),N=await y(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),B=(await y(async()=>{const{default:r}=await import("./__vite-browser-external-BIHI7g3E.js");return{default:r}},[])).default,I=await y(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),j=I.sep,typeof H<"u"))return;let e=C,t=await y(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),o=await y(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await y(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i={fs:e,crypto:t,ws:o,child_process:s};globalThis.require=function(r){return i[r]}}u($,"initNodeModules");function Y(e,t){return I.resolve(t||".",e)}u(Y,"node_resolvePath");function G(e,t){return t===void 0&&(t=location),new URL(e,t).toString()}u(G,"browser_resolvePath");var x;h?x=Y:x=G;var j;h||(j="/");function J(e,t){return e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")?{response:fetch(e)}:{binary:N.readFile(e).then(o=>new Uint8Array(o.buffer,o.byteOffset,o.byteLength))}}u(J,"node_getBinaryResponse");function K(e,t){let o=new URL(e,location);return{response:fetch(o,t?{integrity:t}:{})}}u(K,"browser_getBinaryResponse");var F;h?F=J:F=K;async function Z(e,t){let{response:o,binary:s}=F(e,t);if(s)return s;let i=await o;if(!i.ok)throw new Error(`Failed to load '${e}': request failed.`);return new Uint8Array(await i.arrayBuffer())}u(Z,"loadBinaryFile");var R;if(Ee)R=u(async e=>await import(e),"loadScript");else if(be)R=u(async e=>{try{globalThis.importScripts(e)}catch(t){if(t instanceof TypeError)await import(e);else throw t}},"loadScript");else if(h)R=Q;else throw new Error("Cannot determine runtime environment");async function Q(e){e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")?B.runInThisContext(await(await fetch(e)).text()):await import(W.pathToFileURL(e).href)}u(Q,"nodeLoadScript");async function X(e){if(h){await $();let t=await N.readFile(e,{encoding:"utf8"});return JSON.parse(t)}else return await(await fetch(e)).json()}u(X,"loadLockFile");async function ee(){if(q)return __dirname;let e;try{throw new Error}catch(s){e=s}let t=ge.parse(e)[0].fileName;if(h&&!t.startsWith("file://")&&(t=`file://${t}`),ve){let s=await y(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);return(await y(async()=>{const{fileURLToPath:i}=await import("./__vite-browser-external-BIHI7g3E.js");return{fileURLToPath:i}},[])).fileURLToPath(s.dirname(t))}let o=t.lastIndexOf(j);if(o===-1)throw new Error("Could not extract indexURL path from pyodide module location");return t.slice(0,o)}u(ee,"calculateDirname");function te(e){let t=e.FS,o=e.FS.filesystems.MEMFS,s=e.PATH,i={DIR_MODE:16895,FILE_MODE:33279,mount:function(r){if(!r.opts.fileSystemHandle)throw new Error("opts.fileSystemHandle is required");return o.mount.apply(null,arguments)},syncfs:async(r,n,a)=>{try{let c=i.getLocalSet(r),l=await i.getRemoteSet(r),f=n?l:c,p=n?c:l;await i.reconcile(r,f,p),a(null)}catch(c){a(c)}},getLocalSet:r=>{let n=Object.create(null);function a(f){return f!=="."&&f!==".."}u(a,"isRealDir");function c(f){return p=>s.join2(f,p)}u(c,"toAbsolute");let l=t.readdir(r.mountpoint).filter(a).map(c(r.mountpoint));for(;l.length;){let f=l.pop(),p=t.stat(f);t.isDir(p.mode)&&l.push.apply(l,t.readdir(f).filter(a).map(c(f))),n[f]={timestamp:p.mtime,mode:p.mode}}return{type:"local",entries:n}},getRemoteSet:async r=>{let n=Object.create(null),a=await Se(r.opts.fileSystemHandle);for(let[c,l]of a)c!=="."&&(n[s.join2(r.mountpoint,c)]={timestamp:l.kind==="file"?new Date((await l.getFile()).lastModified):new Date,mode:l.kind==="file"?i.FILE_MODE:i.DIR_MODE});return{type:"remote",entries:n,handles:a}},loadLocalEntry:r=>{let n=t.lookupPath(r).node,a=t.stat(r);if(t.isDir(a.mode))return{timestamp:a.mtime,mode:a.mode};if(t.isFile(a.mode))return n.contents=o.getFileDataAsTypedArray(n),{timestamp:a.mtime,mode:a.mode,contents:n.contents};throw new Error("node type not supported")},storeLocalEntry:(r,n)=>{if(t.isDir(n.mode))t.mkdirTree(r,n.mode);else if(t.isFile(n.mode))t.writeFile(r,n.contents,{canOwn:!0});else throw new Error("node type not supported");t.chmod(r,n.mode),t.utime(r,n.timestamp,n.timestamp)},removeLocalEntry:r=>{var n=t.stat(r);t.isDir(n.mode)?t.rmdir(r):t.isFile(n.mode)&&t.unlink(r)},loadRemoteEntry:async r=>{if(r.kind==="file"){let n=await r.getFile();return{contents:new Uint8Array(await n.arrayBuffer()),mode:i.FILE_MODE,timestamp:new Date(n.lastModified)}}else{if(r.kind==="directory")return{mode:i.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+r.kind)}},storeRemoteEntry:async(r,n,a)=>{let c=r.get(s.dirname(n)),l=t.isFile(a.mode)?await c.getFileHandle(s.basename(n),{create:!0}):await c.getDirectoryHandle(s.basename(n),{create:!0});if(l.kind==="file"){let f=await l.createWritable();await f.write(a.contents),await f.close()}r.set(n,l)},removeRemoteEntry:async(r,n)=>{await r.get(s.dirname(n)).removeEntry(s.basename(n)),r.delete(n)},reconcile:async(r,n,a)=>{let c=0,l=[];Object.keys(n.entries).forEach(function(d){let w=n.entries[d],g=a.entries[d];(!g||t.isFile(w.mode)&&w.timestamp.getTime()>g.timestamp.getTime())&&(l.push(d),c++)}),l.sort();let f=[];if(Object.keys(a.entries).forEach(function(d){n.entries[d]||(f.push(d),c++)}),f.sort().reverse(),!c)return;let p=n.type==="remote"?n.handles:a.handles;for(let d of l){let w=s.normalize(d.replace(r.mountpoint,"/")).substring(1);if(a.type==="local"){let g=p.get(w),ue=await i.loadRemoteEntry(g);i.storeLocalEntry(d,ue)}else{let g=i.loadLocalEntry(d);await i.storeRemoteEntry(p,w,g)}}for(let d of f)if(a.type==="local")i.removeLocalEntry(d);else{let w=s.normalize(d.replace(r.mountpoint,"/")).substring(1);await i.removeRemoteEntry(p,w)}}};e.FS.filesystems.NATIVEFS_ASYNC=i}u(te,"initializeNativeFS");var Se=u(async e=>{let t=[];async function o(i){for await(let r of i.values())t.push(r),r.kind==="directory"&&await o(r)}u(o,"collect"),await o(e);let s=new Map;s.set(".",e);for(let i of t){let r=(await e.resolve(i)).join("/");s.set(r,i)}return s},"getFsHandles");function re(e){let t={noImageDecoding:!0,noAudioDecoding:!0,noWasmDecoding:!1,preRun:se(e),quit(o,s){throw t.exited={status:o,toThrow:s},s},print:e.stdout,printErr:e.stderr,thisProgram:e._sysExecutable,arguments:e.args,API:{config:e},locateFile:o=>e.indexURL+o,instantiateWasm:le(e.indexURL)};return t}u(re,"createSettings");function ie(e){return function(t){let o="/";try{t.FS.mkdirTree(e)}catch(s){console.error(`Error occurred while making a home directory '${e}':`),console.error(s),console.error(`Using '${o}' for a home directory instead`),e=o}t.FS.chdir(e)}}u(ie,"createHomeDirectory");function ne(e){return function(t){Object.assign(t.ENV,e)}}u(ne,"setEnvironment");function oe(e){return e?[async t=>{t.addRunDependency("fsInitHook");try{await e(t.FS,{sitePackages:t.API.sitePackages})}finally{t.removeRunDependency("fsInitHook")}}]:[]}u(oe,"callFsInitHook");function ae(e){let t=Z(e);return async o=>{let s=o._py_version_major(),i=o._py_version_minor();o.FS.mkdirTree("/lib"),o.API.sitePackages=`/lib/python${s}.${i}/site-packages`,o.FS.mkdirTree(o.API.sitePackages),o.addRunDependency("install-stdlib");try{let r=await t;o.FS.writeFile(`/lib/python${s}${i}.zip`,r)}catch(r){console.error("Error occurred while installing the standard library:"),console.error(r)}finally{o.removeRunDependency("install-stdlib")}}}u(ae,"installStdlib");function se(e){let t;return e.stdLibURL!=null?t=e.stdLibURL:t=e.indexURL+"python_stdlib.zip",[...oe(e.fsInit),ae(t),ie(e.env.HOME),ne(e.env),te]}u(se,"getFileSystemInitializationFuncs");function le(e){if(typeof WasmOffsetConverter<"u")return;let{binary:t,response:o}=F(e+"pyodide.asm.wasm");return function(s,i){return async function(){try{let r;o?r=await WebAssembly.instantiateStreaming(o,s):r=await WebAssembly.instantiate(await t,s);let{instance:n,module:a}=r;i(n,a)}catch(r){console.warn("wasm instantiation failed!"),console.warn(r)}}(),{}}}u(le,"getInstantiateWasmFunc");var D="0.27.6";async function ce(e={}){var t,o;await $();let s=e.indexURL||await ee();s=x(s),s.endsWith("/")||(s+="/"),e.indexURL=s;let i={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,lockFileURL:s+"pyodide-lock.json",args:[],env:{},packageCacheDir:s,packages:[],enableRunUntilComplete:!1,checkAPIVersion:!0,BUILD_ID:"58ff83c394cd9a3d28be50b7475d122087896295981974b756ce5fc170e523cf"},r=Object.assign(i,e);(t=r.env).HOME??(t.HOME="/home/pyodide"),(o=r.env).PYTHONINSPECT??(o.PYTHONINSPECT="1");let n=re(r),a=n.API;if(a.lockFilePromise=X(r.lockFileURL),typeof _createPyodideModule!="function"){let d=`${r.indexURL}pyodide.asm.js`;await R(d)}let c;if(e._loadSnapshot){let d=await e._loadSnapshot;ArrayBuffer.isView(d)?c=d:c=new Uint8Array(d),n.noInitialRun=!0,n.INITIAL_MEMORY=c.length}let l=await _createPyodideModule(n);if(n.exited)throw n.exited.toThrow;if(e.pyproxyToStringRepr&&a.setPyProxyToStringMethod(!0),a.version!==D&&r.checkAPIVersion)throw new Error(`Pyodide version does not match: '${D}' <==> '${a.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);l.locateFile=d=>{throw new Error("Didn't expect to load any more file_packager files!")};let f;c&&(f=a.restoreSnapshot(c));let p=a.finalizeBootstrap(f,e._snapshotDeserializer);return a.sys.path.insert(0,a.config.env.HOME),p.version.includes("dev")||a.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${p.version}/full/`),a._pyodide.set_excepthook(),await a.packageIndexReady,a.initializeStreams(r.stdin,r.stdout,r.stderr),p}u(ce,"loadPyodide");async function Oe(){return await ce({indexURL:`https://cdn.jsdelivr.net/pyodide/v${D}/full/`})}const Pe=`
from estimates.main import *
p = split_exercise()
p.use(SplitHyp("h1"))
p.use(SplitHyp("h2"))
p.use(SplitGoal())
p.use(Linarith())
p.use(Linarith())
p.proof()
`;async function Le(e){try{e.textContent="Loading Pyodide...";const t=await Oe();await t.loadPackage("micropip"),await t.runPythonAsync(`
            import micropip
            await micropip.install("micropip")
            await micropip.install("sympy")
        `),e.textContent="Loading wheels...",console.log("installing z3"),await t.runPythonAsync(`
            import micropip
            await micropip.install("file:./z3-0.1.0-py3-none-any.whl")
            import z3
            await z3._init()
            await micropip.install("file:./estimates-0.1.0-py3-none-any.whl")
        `),e.textContent="Running proof...";const o=await t.runPythonAsync(Pe);e.textContent=o}catch(t){e.textContent="Error: "+t.message,console.error(t)}}document.querySelector("#app").innerHTML=`
  <div>
    <h1>Z3 Pyodide Proof Assistant Demo</h1>
    <p>Running proof assistant in the browser using Pyodide...</p>
    <div id="output">Loading...</div>
  </div>
`;const Re=document.querySelector("#output");Le(Re)});export default Fe();
